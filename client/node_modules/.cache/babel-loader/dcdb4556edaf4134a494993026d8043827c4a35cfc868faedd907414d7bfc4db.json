{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Fragment as _Fragment, jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = ({\n  setUser\n}) => {\n  _s();\n  const [form, setForm] = useState({\n    email: '',\n    password: ''\n  });\n  const [error, setError] = useState('');\n  const navigate = useNavigate();\n  const apiUrl = import.meta.env.VITE_API_URL || '/api';\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setForm({\n      ...form,\n      [name]: value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const response = await fetch(`${apiUrl}/users/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(form)\n      });\n      const data = await response.json();\n      localStorage.setItem('token', JSON.stringify(data.token));\n      //Todo Implement on the backend the return of the username;\n      // localStorage.setItem('username', JSON.stringify(data.username));\n\n      setUser({\n        token: data.token\n      });\n      if (!response.ok) {\n        throw new Error('Login failed');\n      }\n      navigate('/');\n    } catch (error) {\n      setError(error.message);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n};\n_s(Login, \"Jei9i2KqbzDhBCTqL+NDqexPZ8E=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useNavigate","Fragment","_Fragment","jsxDEV","_jsxDEV","Login","setUser","_s","form","setForm","email","password","error","setError","navigate","apiUrl","import","meta","env","VITE_API_URL","handleChange","e","name","value","target","handleSubmit","preventDefault","response","fetch","method","headers","body","JSON","stringify","data","json","localStorage","setItem","token","ok","Error","message","_c","$RefreshReg$"],"sources":["C:/Users/User/OneDrive/Desktop/The Story Arc/client/src/components/Login.js"],"sourcesContent":["import React, {useState} from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst Login = ({setUser}) => {\r\n    const [form, setForm] = useState({\r\n        email:'',\r\n        password:''\r\n    });\r\n\r\n    const [error, setError] = useState('');\r\n    const navigate = useNavigate();\r\n    const apiUrl = import.meta.env.VITE_API_URL || '/api';\r\n\r\n    const handleChange = (e) => {\r\n        const {name, value} = e.target;\r\n        setForm({...form, [name]: value});\r\n    };  \r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const response = await fetch(`${apiUrl}/users/login`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type':'application/json'\r\n                },\r\n                body: JSON.stringify(form)\r\n            });\r\n\r\n            const data = await response.json();\r\n            localStorage.setItem('token', JSON.stringify(data.token));\r\n            //Todo Implement on the backend the return of the username;\r\n            // localStorage.setItem('username', JSON.stringify(data.username));\r\n\r\n            setUser({token: data.token});\r\n\r\n            if (!response.ok) {\r\n                throw new Error('Login failed');\r\n            }\r\n\r\n            navigate('/');\r\n        } catch (error) {\r\n            setError(error.message);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <></>\r\n    )\r\n}\r\n\r\nexport default Login;"],"mappings":";AAAA,OAAOA,KAAK,IAAGC,QAAQ,QAAO,OAAO;AACrC,SAASC,WAAW,QAAQ,kBAAkB;AAAC,SAAAC,QAAA,IAAAC,SAAA,EAAAC,MAAA,IAAAC,OAAA;AAE/C,MAAMC,KAAK,GAAGA,CAAC;EAACC;AAAO,CAAC,KAAK;EAAAC,EAAA;EACzB,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGV,QAAQ,CAAC;IAC7BW,KAAK,EAAC,EAAE;IACRC,QAAQ,EAAC;EACb,CAAC,CAAC;EAEF,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAMe,QAAQ,GAAGd,WAAW,CAAC,CAAC;EAC9B,MAAMe,MAAM,GAAGC,MAAM,CAACC,IAAI,CAACC,GAAG,CAACC,YAAY,IAAI,MAAM;EAErD,MAAMC,YAAY,GAAIC,CAAC,IAAK;IACxB,MAAM;MAACC,IAAI;MAAEC;IAAK,CAAC,GAAGF,CAAC,CAACG,MAAM;IAC9Bf,OAAO,CAAC;MAAC,GAAGD,IAAI;MAAE,CAACc,IAAI,GAAGC;IAAK,CAAC,CAAC;EACrC,CAAC;EAED,MAAME,YAAY,GAAG,MAAOJ,CAAC,IAAK;IAC9BA,CAAC,CAACK,cAAc,CAAC,CAAC;IAClB,IAAI;MACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGb,MAAM,cAAc,EAAE;QAClDc,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACL,cAAc,EAAC;QACnB,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACzB,IAAI;MAC7B,CAAC,CAAC;MAEF,MAAM0B,IAAI,GAAG,MAAMP,QAAQ,CAACQ,IAAI,CAAC,CAAC;MAClCC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEL,IAAI,CAACC,SAAS,CAACC,IAAI,CAACI,KAAK,CAAC,CAAC;MACzD;MACA;;MAEAhC,OAAO,CAAC;QAACgC,KAAK,EAAEJ,IAAI,CAACI;MAAK,CAAC,CAAC;MAE5B,IAAI,CAACX,QAAQ,CAACY,EAAE,EAAE;QACd,MAAM,IAAIC,KAAK,CAAC,cAAc,CAAC;MACnC;MAEA1B,QAAQ,CAAC,GAAG,CAAC;IACjB,CAAC,CAAC,OAAOF,KAAK,EAAE;MACZC,QAAQ,CAACD,KAAK,CAAC6B,OAAO,CAAC;IAC3B;EACJ,CAAC;EAED,oBACIrC,OAAA,CAAAF,SAAA,mBAAI,CAAC;AAEb,CAAC;AAAAK,EAAA,CA9CKF,KAAK;EAAA,QAOUL,WAAW;AAAA;AAAA0C,EAAA,GAP1BrC,KAAK;AAgDX,eAAeA,KAAK;AAAC,IAAAqC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}